openapi: 3.0.0

info:
  version: 1.0.0
  title: MIDISense
  description: "This is the API for the MIDISense System"

tags:
  - name: "Display"
  - name: "Interpreter"
  - name: "Intelligence"

paths:

  #=================================================
  # ENDPOINT DEFINITIONS
  #=================================================

  #============= INTERPRETER ============================

  /interpreter/uploadFile:
    post:
      summary: "Endpoint for the Upload File use case of the Interpreter subsystem"
      tags:
        - "Interpreter"
      description: uploadFile
      operationId: uploadFile
      requestBody:
        description: "Request for uploadFile"
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/interpreterUploadFileRequest'
      responses:
        '200':
          description: "Upload File Response"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/interpreterUploadFileResponse'

  /interpreter/processFile:
    post:
      summary: "API endpoint to process File"
      tags:
        - "Interpreter"
      description: ProcessFile
      operationId: ProcessFIle
      requestBody:
        description: "Request for processFile"
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/interpreterProcessFileRequest'
      responses:
        '200':
          description: "processFile Response"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/interpreterProcessFileResponse'

  /interpreter/parseXML:
    post:
      summary: "Endpoint for parsing an XML of the Interpreter subsystem"
      tags:
        - "Interpreter"
      description: parse to XML file
      operationId: ParseXML
      requestBody:
        description: "Request for parseXML"
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/interpreterParseXMLRequest'
      responses:
        '200':
          description: "parseXML Response"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/interpreterParseXMLResponse'
        '401':
          description: Invalid File

  /interpreter/parseStaccato:
    post:
      summary: "API endpoint for parsing a file to Staccato"
      tags:
        - "Interpreter"
      description: parseStaccato
      operationId: ParseStaccato
      requestBody:
        description: "Request for parseStaccato"
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/interpreterParseStaccatoRequest'
      responses:
        '200':
          description: "parseStaccato Response"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/interpreterParseStaccatoResponse'

  /interpreter/getPieceMetadata:
    post:
      summary: "endpoint for getting the piece metadata"
      tags:
        - "Interpreter"
      description: getPieceMetadata
      operationId: getPieceMetadata
      requestBody:
        description: "Request for getPieceMetadata"
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/interpreterGetPieceMetadataRequest'
      responses:
        '200':
          description: "getPieceMetadata Response"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/interpreterGetPieceMetadataResponse'

  /interpreter/interpretMetre:
    post:
      summary: "Endpoint for the Interpret Metre use case of the Interpreter subsystem"
      tags:
        - "Interpreter"
      description: interpretMetre
      operationId: interpretMetre
      requestBody:
        description: "Request for interpretMetre"
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/interpreterInterpretMetreRequest'
      responses:
        '200':
          description: "Interpret Metre Response"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/interpreterInterpretMetreResponse'

  /interpreter/interpretTempo:
    post:
      summary: "Endpoint for the Interpret Tempo use case of the Interpreter subsystem"
      tags:
        - "Interpreter"
      description: interpretTempo
      operationId: interpretTempo
      requestBody:
        description: "Request for interpretTempo"
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/interpreterInterpretTempoRequest'
      responses:
        '200':
          description: "Interpret Tempo Response"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/interpreterInterpretTempoResponse'

  /interpreter/getTrackInfo:
    post:
      summary: "Endpoint for receiving the track info"
      tags:
        - "Interpreter"
      description: getTrackInfo
      operationId: getTrackInfo
      requestBody:
        descripiton: "Request for getTrackInfo"
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/interpreterGetTrackInfoRequest'
      responses:
        '200':
          description: "GetTrackInfo Response"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/interpreterGetTrackInfoResponse'

  /interpreter/getTrackMetadata:
    post:
      summary: "Endpoint for receiving the track metadata"
      tags:
        - "Interpreter"
      description: getTrackMetadata
      operationId: getTrackMetadata
      requestBody:
        description: "Request for getTrackMetadata"
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/interpreterGetTrackMetadataRequest'
      responses:
        '200':
          description: "getTrackMetadata Response"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/interpreterGetTrackMetadataResponse'

  #=================================================
  # SCHEMAS + OBJECTS
  #=================================================

components:
  schemas:

    interpreterUploadFileRequest:
      description: "Description Here"
      type: object
      properties:
        fileContents:
          type: array
          items:
            type: integer

    interpreterUploadFileResponse:
      type: object
      properties:
        fileDesignator:
          type: string

    interpreterProcessFileRequest:
      description: "Request the ProcessFile"
      type: object
      properties:
        fileDesignator:
          type: string

    interpreterProcessFileResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string


    interpreterParseXMLRequest:
      description: "Description Here"
      type: object
      properties:
        fileContents:
          type: array
          items:
            type: integer

    interpreterParseXMLResponse:
      type: object
      properties:
        fileDesignator:
          type: string

    interpreterParseStaccatoRequest:
      description: "request for parseStaccato"
      type: object
      properties:
        fileContents:
          type: array
          items:
            type: integer

    interpreterParseStaccatoResponse:
      type: object
      properties:
        fileDesignator:
          type: string

    interpreterGetPieceMetadataRequest:
      type: object
      properties:
        fileDesignator:
          type: string

    interpreterGetPieceMetadataResponse:
      type: object
      properties:
        tempoIndication:
          type: integer
        keySignature:
          type: string
        timeSignature:
          type: object
          properties:
            numBeats:
              type: integer
            beatValue:
              type: integer

    interpreterInterpretMetreRequest:
      description: "Description Here"
      type: object
      properties:
        fileDesignator:
          type: string

    interpreterInterpretMetreResponse:
      type: object
      properties:
        timeSignature:
          type: object
          properties:
            numBeats:
              type: integer
            beatValue:
              type: integer

    interpreterInterpretTempoRequest:
      description: "Description Here"
      type: object
      properties:
        fileDesignator:
          type: string

    interpreterInterpretTempoResponse:
      type: object
      properties:
        tempoIndication:
          type: integer

    interpreterGetTrackInfoRequest:
      description: "Request Track Info"
      type: object
      properties:
        fileDesignator:
          type: string

    interpreterGetTrackInfoResponse:
      type: object
      properties:
        index:
          type: integer
        trackName:
          type: string

    interpreterGetTrackMetadataRequest:
      description: "Request Track Metadata"
      type: object
      properties:
        fileDesignator:
          type: string
        trackIndex:
          type: integer

    interpreterGetTrackMetadataResponse:
      type: object
      properties:
        trackString:
          type: String